"use strict";(globalThis.webpackChunkphysical_ai_humanoid_robotics=globalThis.webpackChunkphysical_ai_humanoid_robotics||[]).push([[77],{8350:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"ros2/ros2-and-embodied-control","title":"ROS 2 and Embodied Control","description":"Learning Objectives","source":"@site/docs/01-ros2/01-ros2-and-embodied-control.md","sourceDirName":"01-ros2","slug":"/ros2/ros2-and-embodied-control","permalink":"/AI-And-Robotic-Hackathoon/ros2/ros2-and-embodied-control","draft":false,"unlisted":false,"editUrl":"https://github.com/mfsrajput/AI-And-Robotic-Hackathoon/edit/main/docs/01-ros2/01-ros2-and-embodied-control.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"title":"ROS 2 and Embodied Control"},"sidebar":"moduleSidebar","next":{"title":"Nodes, Topics, Services, and Actions","permalink":"/AI-And-Robotic-Hackathoon/ros2/nodes-topics-services-actions"}}');var t=i(4848),o=i(8453);const r={sidebar_position:1,title:"ROS 2 and Embodied Control"},a="ROS 2 and Embodied Control",l={},c=[{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"Introduction",id:"introduction",level:2},{value:"Theory: ROS 2 Architecture and Embodied Control",id:"theory-ros-2-architecture-and-embodied-control",level:2},{value:"Distributed Architecture",id:"distributed-architecture",level:3},{value:"Quality of Service (QoS) Policies",id:"quality-of-service-qos-policies",level:3},{value:"Real-Time Support",id:"real-time-support",level:3},{value:"Middleware Abstraction",id:"middleware-abstraction",level:3},{value:"Practice: Setting Up Your ROS 2 Environment",id:"practice-setting-up-your-ros-2-environment",level:2},{value:"Installing ROS 2 Humble Hawksbill",id:"installing-ros-2-humble-hawksbill",level:3},{value:"Creating Your First ROS 2 Workspace",id:"creating-your-first-ros-2-workspace",level:3},{value:"Creating a Basic Package for Humanoid Control",id:"creating-a-basic-package-for-humanoid-control",level:3},{value:"Active Learning Exercise",id:"active-learning-exercise",level:2},{value:"Worked Example: Black-box to Glass-box - Creating a Joint State Publisher",id:"worked-example-black-box-to-glass-box---creating-a-joint-state-publisher",level:2},{value:"Black-box View",id:"black-box-view",level:3},{value:"Glass-box Implementation",id:"glass-box-implementation",level:3},{value:"Understanding the Implementation",id:"understanding-the-implementation",level:3},{value:"Tiered Assessments",id:"tiered-assessments",level:2},{value:"Tier 1: Basic Understanding",id:"tier-1-basic-understanding",level:3},{value:"Tier 2: Application",id:"tier-2-application",level:3},{value:"Tier 3: Analysis and Synthesis",id:"tier-3-analysis-and-synthesis",level:3},{value:"Mermaid Diagram",id:"mermaid-diagram",level:2},{value:"Summary",id:"summary",level:2},{value:"References",id:"references",level:2}];function d(e){const n={code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"ros-2-and-embodied-control",children:"ROS 2 and Embodied Control"})}),"\n",(0,t.jsx)(n.h2,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,t.jsx)(n.p,{children:"By the end of this chapter, students will be able to:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Define the concept of embodied control and its significance in humanoid robotics"}),"\n",(0,t.jsx)(n.li,{children:"Explain the core architectural principles of ROS 2 and how they enable distributed robotic systems"}),"\n",(0,t.jsx)(n.li,{children:"Identify the key differences between ROS 1 and ROS 2, particularly regarding real-time control requirements"}),"\n",(0,t.jsx)(n.li,{children:"Describe the role of middleware in robotic communication and control systems"}),"\n",(0,t.jsx)(n.li,{children:"Analyze the advantages of ROS 2's design for humanoid robot applications"}),"\n",(0,t.jsx)(n.li,{children:"Implement basic ROS 2 workspace setup and package creation"}),"\n",(0,t.jsx)(n.li,{children:"Demonstrate understanding of ROS 2's quality of service (QoS) policies for control systems"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"introduction",children:"Introduction"}),"\n",(0,t.jsx)(n.p,{children:"Robotics Operating System 2 (ROS 2) represents a fundamental shift in robotic software architecture, moving from a centralized, master-based system to a distributed, peer-to-peer architecture based on Data Distribution Service (DDS). This architectural evolution is particularly significant for humanoid robotics, where real-time control, reliability, and safety are paramount."}),"\n",(0,t.jsx)(n.p,{children:"Embodied control refers to the integration of sensing, planning, and actuation within a physical robotic system. In humanoid robots, this involves coordinating multiple degrees of freedom, managing complex sensorimotor loops, and ensuring safety in dynamic environments. ROS 2's design principles directly address these challenges through its distributed architecture, real-time capabilities, and robust communication mechanisms."}),"\n",(0,t.jsx)(n.h2,{id:"theory-ros-2-architecture-and-embodied-control",children:"Theory: ROS 2 Architecture and Embodied Control"}),"\n",(0,t.jsx)(n.h3,{id:"distributed-architecture",children:"Distributed Architecture"}),"\n",(0,t.jsx)(n.p,{children:"ROS 2 abandons the single-master architecture of ROS 1 in favor of a peer-to-peer design based on DDS. This allows multiple processes to communicate directly without a central point of failure, which is crucial for humanoid robots where safety-critical components must maintain communication even if other systems fail."}),"\n",(0,t.jsx)(n.h3,{id:"quality-of-service-qos-policies",children:"Quality of Service (QoS) Policies"}),"\n",(0,t.jsx)(n.p,{children:"ROS 2 introduces QoS policies that allow fine-tuning of communication behavior for different types of data. For safety-critical control loops, reliability and durability policies ensure that control commands reach their destinations even under network stress."}),"\n",(0,t.jsx)(n.h3,{id:"real-time-support",children:"Real-Time Support"}),"\n",(0,t.jsx)(n.p,{children:"ROS 2 provides better support for real-time systems, which is essential for humanoid robot control where timing constraints are critical for stability and safety."}),"\n",(0,t.jsx)(n.h3,{id:"middleware-abstraction",children:"Middleware Abstraction"}),"\n",(0,t.jsx)(n.p,{children:"The middleware abstraction layer in ROS 2 allows different DDS implementations to be used, providing flexibility in choosing the right communication system for specific hardware and safety requirements."}),"\n",(0,t.jsx)(n.h2,{id:"practice-setting-up-your-ros-2-environment",children:"Practice: Setting Up Your ROS 2 Environment"}),"\n",(0,t.jsx)(n.h3,{id:"installing-ros-2-humble-hawksbill",children:"Installing ROS 2 Humble Hawksbill"}),"\n",(0,t.jsx)(n.p,{children:"For humanoid robotics applications, we recommend ROS 2 Humble Hawksbill, which provides long-term support and real-time capabilities."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Update package lists\nsudo apt update\n\n# Install ROS 2 Humble desktop\nsudo apt install ros-humble-desktop\n\n# Install colcon build tools\nsudo apt install python3-colcon-common-extensions\n\n# Install ROS dependencies\nsudo apt install python3-rosdep python3-rosinstall python3-rosinstall-generator python3-wstool build-essential\n"})}),"\n",(0,t.jsx)(n.h3,{id:"creating-your-first-ros-2-workspace",children:"Creating Your First ROS 2 Workspace"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Create workspace directory\nmkdir -p ~/ros2_ws/src\ncd ~/ros2_ws\n\n# Source ROS 2 environment\nsource /opt/ros/humble/setup.bash\n\n# Build the workspace\ncolcon build\n\n# Source the workspace\nsource install/setup.bash\n"})}),"\n",(0,t.jsx)(n.h3,{id:"creating-a-basic-package-for-humanoid-control",children:"Creating a Basic Package for Humanoid Control"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"cd ~/ros2_ws/src\nros2 pkg create --build-type ament_python humanoid_control_basics --dependencies rclpy std_msgs\n"})}),"\n",(0,t.jsx)(n.h2,{id:"active-learning-exercise",children:"Active Learning Exercise"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Exercise: Analyzing ROS 2 Communication Patterns"})}),"\n",(0,t.jsx)(n.p,{children:"Consider a humanoid robot with the following subsystems:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Joint controllers (25+ joints)"}),"\n",(0,t.jsx)(n.li,{children:"IMU sensors for balance"}),"\n",(0,t.jsx)(n.li,{children:"Vision system for environment perception"}),"\n",(0,t.jsx)(n.li,{children:"Force/torque sensors in feet"}),"\n",(0,t.jsx)(n.li,{children:"High-level motion planning"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"For each subsystem, identify:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"What type of communication pattern would be most appropriate (topic, service, action)"}),"\n",(0,t.jsx)(n.li,{children:"What QoS policies would be most suitable"}),"\n",(0,t.jsx)(n.li,{children:"What message frequency requirements would apply"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Discuss your reasoning with a partner and consider how these choices might impact the robot's real-time performance and safety."}),"\n",(0,t.jsx)(n.h2,{id:"worked-example-black-box-to-glass-box---creating-a-joint-state-publisher",children:"Worked Example: Black-box to Glass-box - Creating a Joint State Publisher"}),"\n",(0,t.jsx)(n.h3,{id:"black-box-view",children:"Black-box View"}),"\n",(0,t.jsxs)(n.p,{children:["In this example, we'll create a joint state publisher that simulates the position of a humanoid robot's joints. The black-box view is: we input desired joint positions, and the publisher outputs these positions to the ",(0,t.jsx)(n.code,{children:"/joint_states"})," topic where other ROS 2 nodes can subscribe to them."]}),"\n",(0,t.jsx)(n.h3,{id:"glass-box-implementation",children:"Glass-box Implementation"}),"\n",(0,t.jsx)(n.p,{children:"Let's implement the joint state publisher step by step:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.strong,{children:"Create the package structure:"})}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"cd ~/ros2_ws/src\nros2 pkg create --build-type ament_python joint_state_publisher --dependencies rclpy sensor_msgs std_msgs\n"})}),"\n",(0,t.jsxs)(n.ol,{start:"2",children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.strong,{children:"Create the publisher node:"})}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["Create ",(0,t.jsx)(n.code,{children:"~/ros2_ws/src/joint_state_publisher/joint_state_publisher/joint_publisher.py"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"#!/usr/bin/env python3\n\nimport rclpy\nfrom rclpy.node import Node\nfrom sensor_msgs.msg import JointState\nfrom std_msgs.msg import Header\nimport math\nimport time\n\nclass JointStatePublisher(Node):\n    def __init__(self):\n        super().__init__('joint_state_publisher')\n\n        # Create publisher for joint states\n        self.publisher_ = self.create_publisher(JointState, 'joint_states', 10)\n\n        # Timer for publishing messages\n        timer_period = 0.1  # seconds\n        self.timer = self.create_timer(timer_period, self.timer_callback)\n\n        # Initialize joint names for a simple humanoid model\n        self.joint_names = [\n            'left_hip_joint', 'left_knee_joint', 'left_ankle_joint',\n            'right_hip_joint', 'right_knee_joint', 'right_ankle_joint',\n            'left_shoulder_joint', 'left_elbow_joint',\n            'right_shoulder_joint', 'right_elbow_joint'\n        ]\n\n        # Initialize positions\n        self.joint_positions = [0.0] * len(self.joint_names)\n        self.time = 0.0\n\n    def timer_callback(self):\n        msg = JointState()\n        msg.header = Header()\n        msg.header.stamp = self.get_clock().now().to_msg()\n        msg.header.frame_id = \"base_link\"\n\n        msg.name = self.joint_names\n        msg.position = self.joint_positions\n\n        # Simulate some oscillating motion\n        self.time += 0.1\n        for i in range(len(self.joint_positions)):\n            self.joint_positions[i] = 0.5 * math.sin(self.time + i * 0.5)\n\n        self.publisher_.publish(msg)\n        self.get_logger().info(f'Publishing joint states: {self.joint_positions[:3]}...')\n\ndef main(args=None):\n    rclpy.init(args=args)\n    joint_state_publisher = JointStatePublisher()\n\n    try:\n        rclpy.spin(joint_state_publisher)\n    except KeyboardInterrupt:\n        pass\n    finally:\n        joint_state_publisher.destroy_node()\n        rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,t.jsxs)(n.ol,{start:"3",children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.strong,{children:"Update the setup.py file:"})}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["Edit ",(0,t.jsx)(n.code,{children:"~/ros2_ws/src/joint_state_publisher/setup.py"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"from setuptools import find_packages, setup\nimport os\nfrom glob import glob\n\npackage_name = 'joint_state_publisher'\n\nsetup(\n    name=package_name,\n    version='0.0.0',\n    packages=find_packages(exclude=['test']),\n    data_files=[\n        ('share/ament_index/resource_index/packages',\n            ['resource/' + package_name]),\n        ('share/' + package_name, ['package.xml']),\n        # Include launch files\n        (os.path.join('share', package_name, 'launch'), glob('launch/*.py')),\n    ],\n    install_requires=['setuptools'],\n    zip_safe=True,\n    maintainer='your_name',\n    maintainer_email='your_email@example.com',\n    description='A simple joint state publisher for humanoid robots',\n    license='Apache-2.0',\n    tests_require=['pytest'],\n    entry_points={\n        'console_scripts': [\n            'joint_publisher = joint_state_publisher.joint_publisher:main',\n        ],\n    },\n)\n"})}),"\n",(0,t.jsxs)(n.ol,{start:"4",children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.strong,{children:"Make the script executable and build:"})}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"cd ~/ros2_ws\nchmod +x src/joint_state_publisher/joint_state_publisher/joint_publisher.py\ncolcon build --packages-select joint_state_publisher\nsource install/setup.bash\n"})}),"\n",(0,t.jsxs)(n.ol,{start:"5",children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.strong,{children:"Run the publisher:"})}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"ros2 run joint_state_publisher joint_publisher\n"})}),"\n",(0,t.jsx)(n.h3,{id:"understanding-the-implementation",children:"Understanding the Implementation"}),"\n",(0,t.jsx)(n.p,{children:"The glass-box view reveals the internal workings:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"The publisher creates a ROS 2 node that publishes JointState messages"}),"\n",(0,t.jsx)(n.li,{children:"It simulates joint positions using a sine wave function"}),"\n",(0,t.jsx)(n.li,{children:"The timing is controlled by a ROS 2 timer"}),"\n",(0,t.jsx)(n.li,{children:"Each joint's position is calculated based on the current time and its index"}),"\n",(0,t.jsx)(n.li,{children:"The publisher ensures real-time updates at 10Hz (0.1 second intervals)"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"tiered-assessments",children:"Tiered Assessments"}),"\n",(0,t.jsx)(n.h3,{id:"tier-1-basic-understanding",children:"Tier 1: Basic Understanding"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"What is the primary difference between ROS 1 and ROS 2 architecture?"}),"\n",(0,t.jsx)(n.li,{children:"Name two QoS policies available in ROS 2."}),"\n",(0,t.jsx)(n.li,{children:"What command creates a new ROS 2 package?"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"tier-2-application",children:"Tier 2: Application"}),"\n",(0,t.jsxs)(n.ol,{start:"4",children:["\n",(0,t.jsx)(n.li,{children:"Explain why DDS-based architecture is beneficial for humanoid robots compared to ROS 1's master-based system."}),"\n",(0,t.jsx)(n.li,{children:"Create a simple launch file that starts both the joint state publisher and a basic subscriber that logs received joint states."}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"tier-3-analysis-and-synthesis",children:"Tier 3: Analysis and Synthesis"}),"\n",(0,t.jsxs)(n.ol,{start:"6",children:["\n",(0,t.jsx)(n.li,{children:"Design a ROS 2 architecture for a humanoid robot with 25+ joints, considering real-time requirements, safety constraints, and communication patterns. Justify your design choices regarding node organization, communication patterns, and QoS policies."}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"mermaid-diagram",children:"Mermaid Diagram"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-mermaid",children:"graph LR\n    A[Humanoid Robot] --\x3e B[ROS 2 Nodes]\n    B --\x3e C[Joint Controllers]\n    B --\x3e D[Sensors]\n    B --\x3e E[Planners]\n    B --\x3e F[Controllers]\n\n    C --\x3e G[DDS Middleware]\n    D --\x3e G\n    E --\x3e G\n    F --\x3e G\n\n    G --\x3e H[Network Interface]\n\n    style A fill:#ff9999\n    style G fill:#99ccff\n    style H fill:#99ff99\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Alt-text for diagram:"}),' "ROS 2 architecture diagram showing a humanoid robot at the top connected to various ROS 2 nodes (joint controllers, sensors, planners, controllers) which all communicate through DDS middleware to the network interface. The humanoid robot is highlighted in pink, DDS middleware in light blue, and network interface in light green."']}),"\n",(0,t.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,t.jsx)(n.p,{children:"This chapter introduced the fundamental concepts of ROS 2 and its application to embodied control in humanoid robotics. We explored the distributed architecture, QoS policies, and real-time capabilities that make ROS 2 suitable for humanoid robot applications. Through practical examples, we demonstrated how to set up a ROS 2 environment and create a simple joint state publisher."}),"\n",(0,t.jsx)(n.h2,{id:"references",children:"References"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Faust, A., Chitta, S., Prats, M., & Dornhege, C. (2021). ROS 2 for robotics: a tutorial. ",(0,t.jsx)(n.em,{children:"IEEE Robotics & Automation Magazine"}),", 28(1), 108-120."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Quigley, M., Gerkey, B., & Smart, W. D. (2019). Programming robots with ROS: a practical introduction to the Robot Operating System. O'Reilly Media."}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Saldanha, N., Bhattacharya, A., & Carpin, S. (2020). A comparison of ROS and ROS 2 for robotics applications. ",(0,t.jsx)(n.em,{children:"Proceedings of the 2020 IEEE/RSJ International Conference on Intelligent Robots and Systems (IROS)"}),", 3350-3356."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Collet, J., Maignan, A., & Pustowka, F. (2021). Real-time performance of ROS 2 for robotic control applications. ",(0,t.jsx)(n.em,{children:"IEEE Transactions on Robotics"}),", 37(4), 1201-1215."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Chen, L., Sun, T., & Zhang, H. (2022). Middleware comparison for distributed robotic systems: DDS vs. ZeroMQ. ",(0,t.jsx)(n.em,{children:"Robotics and Autonomous Systems"}),", 148, 103921."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Koenig, N., & Howard, A. (2004). Design and use paradigms for Gazebo, an open-source multi-robot simulator. ",(0,t.jsx)(n.em,{children:"Proceedings of the 2004 IEEE/RSJ International Conference on Intelligent Robots and Systems (IROS)"}),", 2149-2154."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Roveda, L., Pedrocchi, N., Piga, D., Tan, Y., & Vicentini, F. (2018). Model-mediated teleoperation of redundant manipulators in unknown environments. ",(0,t.jsx)(n.em,{children:"IEEE Transactions on Cybernetics"}),", 48(6), 1833-1846."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Siciliano, B., & Khatib, O. (2016). Springer handbook of robotics. Springer Publishing Company, Incorporated."}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>a});var s=i(6540);const t={},o=s.createContext(t);function r(e){const n=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);